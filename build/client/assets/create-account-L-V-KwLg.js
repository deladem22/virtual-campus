import{R as f,j as e}from"./jsx-runtime-CAOzMBF_.js";import{u as p}from"./index.esm-eIWaUr6p.js";import{B as b}from"./button-D3-ocrTF.js";import{I as n}from"./input-DaKQDKVv.js";import{U as g}from"./username-regex-D55r8JyB.js";import{a as N,b as v,c as y,L as S}from"./components-BUh_SX-e.js";import{a as E}from"./index-BqmKY8Xa.js";import"./clsx-B-dksMZM.js";const D=({data:s})=>[{title:`Create Account | ${s==null?void 0:s.school} âœ½ gctu`}];function F(){const{emailExtensions:s}=N(),{formState:l,getFieldState:i,handleSubmit:u,register:r,setError:o}=p(),c=v(),t=y(),h=E();function x(a){h(JSON.stringify(a),{method:"POST",encType:"application/json"})}const m=i("email",l),d=i("username",l);return f.useEffect(()=>{t&&t.type==="conflict"&&o(t.field,{message:t.message})},[t,o]),e.jsx("div",{className:"container mx-auto",children:e.jsx("div",{className:"min-h-[60vh]",children:e.jsx("div",{className:"lg:max-w-[24rem] mx-auto",children:e.jsxs("form",{className:"bg-white dark:bg-neutral-900 rounded-lg border dark:border-neutral-800 p-4",onSubmit:u(x),children:[e.jsx("h1",{className:"font-bold text-2xl mb-2",children:"Create Account"}),e.jsxs("label",{className:"block",children:[e.jsxs("div",{children:["Username",d.error&&e.jsx("small",{className:"text-red-500 pl-2",children:d.error.message})]}),e.jsx(n,{...r("username",{required:!0,pattern:g})}),e.jsx("small",{className:"text-secondary",children:"This can never be changed."})]}),e.jsxs("label",{className:"block mt-2",children:[e.jsxs("div",{children:["Email"," ",m.error&&e.jsx("small",{className:"text-red-500 pl-2",children:m.error.message})]}),e.jsx(n,{...r("email",{required:!0,validate(a){return s.some(j=>a.endsWith(j))||"Invalid email. Use your school email."},setValueAs(a){return a.toLowerCase()}})}),e.jsxs("small",{className:"text-secondary",style:{lineHeight:"1rem"},children:["Your school email. You'll need to verify your account."," "]})]}),e.jsxs("label",{className:"block mt-2",children:["Password",e.jsx(n,{type:"password",...r("password",{required:!0,minLength:8})}),e.jsx("small",{className:"text-secondary",children:"Minimum of 8 characters"})]}),e.jsx("div",{className:"mt-2",children:e.jsx(b,{disabled:c.state==="submitting",children:c.state==="submitting"?"Creating account...":"Create an account"})}),e.jsxs("p",{className:"mt-2",children:["Already have an account?"," ",e.jsx(S,{className:"underline font-medium text-rose-500",to:"/login",children:"Log in"})," ","instead."]})]})})})})}export{F as default,D as meta};

import{R as n,j as e}from"./jsx-runtime-CAOzMBF_.js";import{A as o}from"./avatar-CnHNwoiQ.js";import{b as a,L as c,P as p}from"./post-item-C5ncU2kd.js";import{P as d}from"./post-content-CvrB0C3n.js";import{b as u,L as l,a as x,u as h}from"./components-B61dXm5I.js";import"./clsx-B-dksMZM.js";import"./post-time-BzanNHiO.js";import"./dayjs.min-DReL-Uwu.js";import"./file-input-AkW8SXRP.js";import"./modal-Yn7LYWtH.js";import"./index-B3TG-iMG.js";import"./index-CNXIhnF3.js";import"./tag-select-dLfp8U7r.js";import"./button-D3-ocrTF.js";import"./input-DaKQDKVv.js";import"./index.esm-eIWaUr6p.js";import"./textarea-D9GvzXla.js";import"./username-Dv9jz7V0.js";function j(s){const[t,r]=n.useState([]),i=u();return n.useEffect(()=>{i.load(`/people?postId=${s}`)},[s,i.load]),n.useEffect(()=>{i.data&&r(i.data.people)},[i.data]),t}function g({post:s}){const t=j(s.id);return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"text-sm text-secondary font-medium ms-1 flex items-center gap-2",children:[e.jsx("div",{className:"i-lucide-users-2"})," People",e.jsx("span",{className:"bg-zinc-200 dark:bg-neutral-800 rounded-full px-2",children:s.people})]}),e.jsx("ul",{children:t.map(r=>e.jsx("li",{children:e.jsxs("div",{className:"flex gap-2 py-1 px-2 rounded-lg hover:bg-zinc-100 items-center hover-bg-light",children:[e.jsx(l,{to:`/p/${r.username}`,children:e.jsx(o,{size:22,name:r.username})}),e.jsxs("div",{children:[r.username," ",r.id===s.user.id&&e.jsx("span",{className:"bg-zinc-200 dark:bg-neutral-800 rounded-full px-2 text-sm text-secondary font-medium",children:"OP"})]})]})},r.id))})]})}const S=({data:s})=>{const t=s==null?void 0:s.post.content.substring(0,72);return[{title:`@${s==null?void 0:s.post.user.username} posted in Discussions | ${s==null?void 0:s.meta.shortName} ✽ gctuvc`},{name:"description",content:`${t}…`}]};function q(){const{comments:s,post:t}=x(),{user:r}=h("root")||{};return e.jsx("div",{className:"container mx-auto min-h-[60vh]",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"col-span-1 lg:col-span-2",children:[e.jsx(d,{post:t}),e.jsx("div",{className:"flex gap-2 mt-4",children:r?e.jsxs(e.Fragment,{children:[e.jsx(l,{to:`/p/${r.username}`,children:e.jsx(o,{name:(r==null?void 0:r.username)||""})}),e.jsx("div",{className:"flex-1",children:e.jsx(a,{parent:t,level:1})})]}):e.jsx(c,{})}),e.jsx("div",{className:"mt-2",children:s.map((i,m)=>e.jsxs(n.Fragment,{children:[e.jsx(p,{post:i,level:1}),m<s.length-1&&e.jsx("hr",{className:"me-2 ms-12 dark:border-neutral-800"})]},i.id))})]}),e.jsx("div",{className:"cols-span-1 hidden lg:block",children:e.jsx(g,{post:t})})]})})}export{q as default,S as meta};

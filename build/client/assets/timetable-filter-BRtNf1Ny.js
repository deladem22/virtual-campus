import{R as d,j as e}from"./jsx-runtime-CAOzMBF_.js";import{u as N,a as b}from"./index.esm-eIWaUr6p.js";import{u as L,L as F}from"./large-select-mtqL2FVJ.js";import{I as O}from"./input-DaKQDKVv.js";import{S as x}from"./select-D6U1yScx.js";import{u as P,c as T}from"./index-B3TG-iMG.js";function I({currentSem:n,programmes:o}){const s=P(),[j,h]=d.useState(!1),g=L(),{watch:t,register:i,setValue:v}=N({defaultValues:{programme:s.programme,level:s.level,sem:s.sem??n??"1",year:s.year}}),f=T(),r=t("programme"),m=t("level"),c=t("sem"),p=t("year"),u=d.useMemo(()=>o.find(({slug:a})=>a===r),[o,r]),y=o.map(({name:a,slug:l})=>({label:a,value:l}));async function S(a){await g.submit(JSON.stringify(a),{encType:"application/json",action:"/programmes",method:"POST"})}return d.useEffect(()=>{if(!r||!m||!c||!p)return;const a=s.day??"1",l=`/timetable/${p}/${r}/${m}/${c}/${a}`;location.pathname.startsWith(l)||f(l)},[r,m,c,p,s.day,f]),e.jsxs("div",{className:"max-lg:block flex gap-2",children:[e.jsx("div",{className:"flex-1 max-lg:mb-2",children:e.jsx(F,{label:"Programme",newForm:e.jsx($,{}),onAdd:S,open:j,onToggle:a=>h(a),options:y,onSelect:a=>{v("programme",a),h(!1)},children:(u==null?void 0:u.name)??"Select a programme"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{className:"flex-1",...i("year"),children:e.jsx("option",{value:"2023-2024",children:"2023/2024"})}),e.jsxs(x,{className:"flex-1",...i("level",{required:!0}),children:[e.jsx("option",{value:"100",children:"L100"}),e.jsx("option",{value:"200",children:"L200"}),e.jsx("option",{value:"300",children:"L300"}),e.jsx("option",{value:"400",children:"L400"}),e.jsx("option",{value:"500",children:"L500"}),e.jsx("option",{value:"600",children:"L600"})]}),e.jsxs(x,{className:"flex-1",...i("sem",{required:!0}),children:[e.jsx("option",{value:"1",children:"Sem 1"}),e.jsx("option",{value:"2",children:"Sem 2"})]})]})]})}function $(){const{register:n}=b();return e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"p-2",children:e.jsxs("label",{children:["Programme",e.jsx(O,{type:"text",...n("name",{required:!0})}),e.jsx("small",{className:"text-secondary",children:"Example. BSc. Aerospace Engineering, MSc. Mathematics"})]})})})}export{I as T};
